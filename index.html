<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>easyJet Org Chart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body { height: 100%; margin: 0; background: #f6f7f9; }
    #chart { height: 100vh; }
  </style>

  <!-- UMD builds in working order -->
  <script src="https://unpkg.com/d3@7.8.5/dist/d3.min.js"></script>
  <script src="https://unpkg.com/d3-flextree@2.1.2/build/d3-flextree.js"></script>
  <script src="https://unpkg.com/d3-org-chart@2.6.0/build/d3-org-chart.js"></script>
</head>
<body>
  <div id="chart"></div>

  <script>
    // Pick whichever global the UMD exposes
    const OrgChartCtor = window.OrgChart || (window.d3 && window.d3.OrgChart);
    if (!OrgChartCtor) {
      document.body.innerHTML = "<pre style='padding:16px;color:#b91c1c;background:#fee2e2'>OrgChart library failed to load.\nCheck the console for script errors.</pre>";
      throw new Error("OrgChart UMD not found on window");
    }

    const data = [
      { id: 'Kenton Jarvis', title: '' },
      { id: 'Sophie Dekkers', parentId: 'Kenton Jarvis', title: 'Chief Commercial Officer' },
      { id: 'Robert Birge', parentId: 'Kenton Jarvis', title: 'Chief Customer and Marketing Officer' },
      { id: 'Donna Collins', parentId: 'Kenton Jarvis', title: 'Executive Assistant to CEO' },
      { id: 'David Morgan', parentId: 'Kenton Jarvis', title: 'Chief Operations Officer' },
      { id: 'Opal Perry', parentId: 'Kenton Jarvis', title: 'Chief Data and Technology Officer' },
      { id: 'Thomas Haagensen', parentId: 'Kenton Jarvis', title: 'Group Markets Director' },
      { id: 'Rebecca Mills', parentId: 'Kenton Jarvis', title: 'Group General Counsel and Company Secretary' },
      { id: 'Elly Tomlins', parentId: 'Kenton Jarvis', title: 'Chief People Officer' },
      { id: 'Garry Wilson', parentId: 'Kenton Jarvis', title: 'Chief Executive Officer â€“ easyJet Holidays' },
      { id: 'Jan De Raeymaeker', parentId: 'Kenton Jarvis', title: 'Chief Financial Officer' },
      { id: 'Daniele Grassini', parentId: 'David Morgan', title: 'Director of Training and Standards' },
      { id: 'Michael Brown', parentId: 'David Morgan', title: 'Director of Cabin Services' },
      { id: 'Neil Slaven', parentId: 'David Morgan', title: 'Director of Operations Strategy and Planning' },
      { id: 'Karen Honour', parentId: 'David Morgan', title: 'Executive Assistant' },
      { id: 'Simon Cox', parentId: 'David Morgan', title: 'Director of Ground Operations' },
      { id: 'Chris Hartman', parentId: 'David Morgan', title: 'Operations Consultant' },
      { id: 'Gill Baudot', parentId: 'David Morgan', title: 'Director of Network Control' },
      { id: 'Brendan McConnellogue', parentId: 'David Morgan', title: 'Director of Engineering & Maintenance' },
      { id: 'Bart Prudon', parentId: 'David Morgan', title: 'Director of Flight Operations' },
      { id: 'Jim Pegram', parentId: 'David Morgan', title: 'Director Safety, Security & Compliance' },
      { id: 'Hugh McConnellogue', parentId: 'David Morgan', title: 'Director of Gatwick' },
      { id: 'Jean-Marc Thevenaz', parentId: 'David Morgan', title: 'Managing Director Switzerland' },
      { id: 'Jamie Fraser', parentId: 'Bart Prudon', title: 'Head of Operations Transformation' },
      { id: 'Alexander Gerritsen', parentId: 'Bart Prudon', title: 'Chief Pilot' },
      { id: 'Paul Ingram', parentId: 'Bart Prudon', title: 'Head of Flight Crew Operations' },
      { id: 'Emily Tollafield', parentId: 'Bart Prudon', title: 'Head of Business Delivery' },
      { id: 'Joakim Westberg', parentId: 'Bart Prudon', title: 'Safety Manager AOC, ATO & CAMO' }
    ];

    const chart = new OrgChartCtor()
      .container('#chart')
      .data(data)
      .nodeWidth(() => 270)
      .nodeHeight(() => 82)
      .childrenMargin(() => 28)
      .compact(true)
      .initialZoom(0.9)
      // Click a node to toggle collapse/expand
      .onNodeClick(d => { chart.collapse(d); chart.render().fit(); })
      // Clean node content: no orange circle button
      .nodeContent(d => {
        const title = d.data.title || '';
        return `
          <div style="
            width:260px;height:74px;box-sizing:border-box;background:#fff;
            border:1px solid #e6e9ef;border-radius:12px;
            box-shadow:0 2px 8px rgba(17,24,39,0.08);
            padding:12px 16px;position:relative;">
            <div style="font-weight:700;font-size:15px;color:#111827;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">
              ${d.data.id}
            </div>
            <div style="font-size:12.5px;color:#6b7280;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:4px;">
              ${title}
            </div>
          </div>`;
      })
      .render()
      .fit();
  </script>
</body>
</html>
